<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Findora ‚Äì Ir√°nyt mutat a legjobb aj√°nlatokhoz</title>
<style>
:root{--primary:#003366;--gold:#ffd166;--text:#111;--muted:#6b7280;
--card:rgba(255,255,255,.92);--border:#e5e7eb}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif;background:#f6f8fb;color:var(--text)}
a{color:#0a66c2;text-decoration:none}a:hover{text-decoration:underline}

/* HEADER */
.hero{width:100%;min-height:160px;background:linear-gradient(90deg,#1a4b8c,#003366);
color:#fff;display:flex;align-items:center;justify-content:center;text-align:center;padding:12px 10px}
.hero-inner{max-width:1100px;width:100%}
.brand{display:flex;gap:12px;align-items:center;justify-content:center;margin-bottom:6px}
.brand img{height:42px;border-radius:10px;background:#123}
.hero h1{font-size:clamp(20px,3.5vw,32px);color:var(--gold)}
.hero p{font-size:clamp(13px,1.7vw,16px)}
.promo{margin:8px auto 10px;background:linear-gradient(90deg,#ffcc80,#ffd166,#ffe9b3);
color:#111;padding:7px 10px;border-radius:10px;max-width:780px;font-weight:600}

/* Search */
.searchbar{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
.searchbar input,.searchbar button{padding:10px;border:none;border-radius:10px;font-size:14px}
.searchbar input{min-width:220px;max-width:360px;flex:1}
.searchbar button{background:var(--gold);color:#111;font-weight:700;cursor:pointer}

/* Layout */
main{max-width:1100px;margin:26px auto;padding:0 16px}
.section{background:rgba(255,255,255,.72);border:1px solid rgba(255,255,255,.28);
border-radius:12px;margin-bottom:26px;box-shadow:0 3px 8px rgba(0,0,0,.06);backdrop-filter:blur(4px)}
.section h2{font-size:20px;padding:12px 16px;background:#e2e8f0;border-radius:12px 12px 0 0;display:flex;align-items:center;gap:10px}
.section.deals25 h2{background:linear-gradient(90deg,#ffe0b2,#ffcc80)}
.section.deals50 h2{background:linear-gradient(90deg,#ffcdd2,#ef9a9a)}
.section img.logo{height:20px;width:auto}
.grid{display:grid;gap:18px;padding:16px;grid-template-columns:repeat(auto-fill,minmax(270px,1fr))}

/* Cards */
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;
overflow:hidden;display:flex;flex-direction:column;position:relative;height:360px;
transition:transform .25s, box-shadow .25s}
.card:hover{transform:translateY(-5px);box-shadow:0 8px 18px rgba(0,0,0,.15)}
.thumb{height:180px;position:relative;background:#e8eef7;overflow:hidden}
.thumb img{width:100%;height:100%;object-fit:cover;display:block}
.badge{position:absolute;top:8px;left:8px;background:#ff4d4f;color:#fff;font-weight:700;padding:4px 8px;border-radius:6px;font-size:12px}
.body{padding:12px;flex-grow:1}
.title{font-weight:700;margin-bottom:4px}
.muted{color:var(--muted);font-size:12px;display:flex;align-items:center;gap:6px}
.muted img{width:16px;height:16px;object-fit:contain}
.price{font-weight:800;margin-top:8px}
.cta{margin-top:auto;padding:12px;text-align:center}
.cta a{display:inline-block;background:var(--gold);padding:8px 12px;border-radius:8px;color:#111;font-weight:600}

/* Search toolbar (Back/Home) */
.toolbar{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:10px 16px;background:#eef2f7;border-bottom:1px solid #e5e7eb;border-radius:12px 12px 0 0}
.toolbtn{background:#fff;border:1px solid #d1d5db;border-radius:10px;padding:8px 12px;cursor:pointer;font-weight:600}
.toolbtn:hover{background:#f5f6f8}

/* Footer */
footer{text-align:center;padding:22px;background:var(--primary);color:#fff;margin-top:34px;font-size:14px}
</style>
</head>
<body>

<header class="hero">
  <div class="hero-inner">
    <div class="brand">
      <img id="brandLogo" src="assets/img/findora-header.png"
           data-fallback1="assets/img/findora_mark.png"
           data-fallback2="https://upload.wikimedia.org/wikipedia/commons/3/3f/Compass_rose_simple.svg"
           alt="Findora">
      <div>
        <h1>Findora</h1>
        <p>Ir√°nyt mutat a legjobb aj√°nlatokhoz</p>
      </div>
    </div>
    <div class="promo">üéÅ K√©sz√ºlj az √ºnnepekre! ‚Äì üõçÔ∏è Black Friday akci√≥k is el√©rhet≈ëk!</div>
    <form id="searchForm" class="searchbar">
      <input id="q" type="search" placeholder="Keres√©s: pl. laptop, cip≈ë, ruha, wellness‚Ä¶" />
      <button type="submit">Keres√©s</button>
    </form>
  </div>
</header>

<main id="content"></main>

<footer>¬© 2025 Findora ‚Ä¢ Az oldalon affiliate linkek lehetnek.</footer>

<script>
/* ===== Link√©p√≠t≈ëk ===== */
const AMAZON_TAG="findora30-20";
const amazon = q => `https://www.amazon.com/s?k=${encodeURIComponent(q)}&tag=${AMAZON_TAG}`;
const alza    = q => `https://www.alza.hu/search.htm?exps=${encodeURIComponent(q)}`;
const booking = q => `https://www.booking.com/searchresults.html?ss=${encodeURIComponent(q)}`;
const aboutyou= q => `https://www.aboutyou.hu/kereses?term=${encodeURIComponent(q)}`;

/* ===== Log√≥k ===== */
const LOGO_URLS={
  Amazon:"https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg",
  Alza:"https://upload.wikimedia.org/wikipedia/commons/d/d2/Alza.cz_logo.svg",
  Booking:"https://upload.wikimedia.org/wikipedia/commons/e/e6/Booking.com_logo.svg",
  AboutYou:"https://upload.wikimedia.org/wikipedia/commons/7/79/About_You_logo.svg"
};

/* ===== Fejl√©c log√≥ fallback ===== */
(function(){
 const img=document.getElementById('brandLogo'); let step=0;
 img.onerror=()=>{ step++; if(step===1) img.src=img.dataset.fallback1;
                   else if(step===2) img.src=img.dataset.fallback2; };
})();

/* ===== Alap adatok ===== */
const ITEMS=[
  {title:"Olcs√≥ laptop",partner:"Amazon",price:"129 990 Ft",discount:25,url:amazon("laptop"),
   thumb:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=1200"},
  {title:"Okos√≥ra akci√≥",partner:"Alza",price:"39 990 Ft",discount:40,url:alza("okos√≥ra"),
   thumb:"https://images.unsplash.com/photo-1517433456452-f9633a875f6f?q=80&w=1200"},
  {title:"Budapest wellness h√©tv√©ge",partner:"Booking",price:"V√°ltoz√≥",discount:30,url:booking("Budapest wellness"),
   thumb:"https://images.unsplash.com/photo-1501117716987-c8e1ecb2101f?q=80&w=1200"},
  {title:"N≈ëi cip≈ëk -40%",partner:"AboutYou",price:"V√°ltoz√≥",discount:40,url:aboutyou("n≈ëi cip≈ë"),
   thumb:"https://images.unsplash.com/photo-1596464716121-5d0ae0e87dfd?q=80&w=1200"},
  {title:"F√©rfi dzsekik -35%",partner:"AboutYou",price:"V√°ltoz√≥",discount:35,url:aboutyou("f√©rfi dzseki"),
   thumb:"https://images.unsplash.com/photo-1603251579431-8041402bdeda?q=80&w=1200"}
];

/* ===== K√©p fallback l√°nc ===== */
function setSmartImage(img, keywords){
  const chain = [
    img.dataset.src || "",                                             // 1) saj√°t
    `https://source.unsplash.com/800x600/?${encodeURIComponent(keywords)}`, // 2) Unsplash source
    `https://picsum.photos/seed/${encodeURIComponent(keywords)}/800/600`    // 3) Picsum
  ].filter(Boolean);

  let i=0; const tryNext=()=>{ if(i>=chain.length) return;
    img.src = chain[i++]; };
  img.addEventListener('error', tryNext);
  // ha 2.5s alatt sem j√∂n k√©p, v√°ltson
  const t=setTimeout(()=>{ if(!img.complete || img.naturalWidth===0) tryNext(); }, 2500);
  img.addEventListener('load',()=>clearTimeout(t));

  tryNext(); // indul az els≈ëvel
}

/* ===== K√°rtya HTML ===== */
function cardHTML(it){
  const badge=it.discount>=25?`<span class="badge">-${it.discount}%</span>`:"";
  const logo=LOGO_URLS[it.partner]?`<img src="${LOGO_URLS[it.partner]}" alt="${it.partner}">`:"";
  // a k√©p t√©nyleges src-j√©t a setSmartImage t√∂lti be
  return `<div class="card">${badge}
    <div class="thumb"><img data-src="${it.thumb||""}" alt="${it.title}" loading="lazy"></div>
    <div class="body">
      <div class="title">${it.title}</div>
      <div class="muted">${logo} ${it.partner}</div>
      <div class="price">${it.price}</div>
    </div>
    <div class="cta"><a href="${it.url}" target="_blank" rel="nofollow sponsored noopener">Megnyit√°s</a></div>
  </div>`;
}

/* ===== Render seg√©dek ===== */
const content=document.getElementById('content');
const q=document.getElementById('q');

async function renderSection(title,items){
  if(!items.length)return;
  const s=document.createElement('section');
  s.className='section';
  s.innerHTML=`<h2>${title}</h2><div class="grid"></div>`;
  const g=s.querySelector('.grid');
  for(const it of items){
    g.insertAdjacentHTML('beforeend',cardHTML(it));
    const img=g.lastElementChild.querySelector('img');
    setSmartImage(img, it.title);
  }
  content.appendChild(s);
}

/* ===== F≈ëoldal ===== */
function showHome(){
  content.innerHTML="";
  renderSection("üéÅ Aktu√°lis aj√°nlatok", ITEMS);
}

/* ===== Keres√©s (Home / Vissza gombbal) ===== */
function showSearch(val){
  const v=val.toLowerCase();
  const res=ITEMS.filter(i=>i.title.toLowerCase().includes(v)||i.partner.toLowerCase().includes(v));

  content.innerHTML=`
    <section class="section">
      <div class="toolbar">
        <button class="toolbtn" id="btnBack">‚Üê Vissza</button>
        <strong>Keres√©s: ‚Äû${val}‚Äù</strong>
        <button class="toolbtn" id="btnHome">üè† F≈ëoldal</button>
      </div>
      <div class="grid"></div>
    </section>`;
  document.getElementById('btnBack').onclick=()=>history.length>1?history.back():showHome();
  document.getElementById('btnHome').onclick=()=>showHome();

  const g=content.querySelector('.grid');

  if(res.length){
    for(const it of res){
      g.insertAdjacentHTML('beforeend',cardHTML(it));
      setSmartImage(g.lastElementChild.querySelector('img'), it.title);
    }
  }else{
    const sugg=[
      {title:`Keres√©s az Amazonon: ${val}`,partner:"Amazon",price:"",url:amazon(val),thumb:""},
      {title:`Keres√©s az Alz√°n: ${val}`,partner:"Alza",price:"",url:alza(val),thumb:""},
      {title:`Keres√©s a Bookingon: ${val}`,partner:"Booking",price:"",url:booking(val),thumb:""}
    ];
    const fashion=["cip≈ë","ruha","dzseki","p√≥l√≥","kab√°t","szoknya","pul√≥ver","farmer","ing"];
    if(fashion.some(w=>v.includes(w))){
      sugg.unshift({title:`Keres√©s az AboutYou-n: ${val}`,partner:"AboutYou",price:"",url:aboutyou(val),thumb:""});
    }
    for(const it of sugg){
      g.insertAdjacentHTML('beforeend',cardHTML(it));
      setSmartImage(g.lastElementChild.querySelector('img'), it.title);
    }
  }
}

/* ===== Esem√©nyek ===== */
document.getElementById('searchForm').addEventListener('submit',e=>{
  e.preventDefault();
  const v=q.value.trim();
  if(v){ showSearch(v); }
  else { showHome(); }
});

/* Start */
showHome();
</script>
</body>
</html>
